<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ElementForm</title>
    <link rel="stylesheet" href="../css/index.css">
    <script type="text/javascript" src="../js/vue.js"></script>
    <script type="text/javascript" src="../js/index.js"></script>
</head>
<body>

<div id="app">
    <el-form ref="form" :model="form" label-width="80px" :rules="rules">
        <el-form-item label="活动名称" prop="name">
            <el-input v-model="form.name"></el-input>
        </el-form-item>
        <el-form-item label="活动区域" prop="region">
            <el-select v-model="form.region" placeholder="请选择活动区域">
                <el-option label="区域一" value="shanghai"></el-option>
                <el-option label="区域二" value="beijing"></el-option>
            </el-select>
        </el-form-item>
        <el-form-item label="即时配送" prop="delivery">
            <el-switch v-model="form.delivery"></el-switch>
        </el-form-item>
        <el-form-item label="活动性质" prop="type">
            <el-checkbox-group v-model="form.type">
                <el-checkbox label="美食/餐厅线上活动" name="type"></el-checkbox>
                <el-checkbox label="地推活动" name="type"></el-checkbox>
                <el-checkbox label="线下主题活动" name="type"></el-checkbox>
                <el-checkbox label="单纯品牌曝光" name="type"></el-checkbox>
            </el-checkbox-group>
        </el-form-item>
        <el-form-item label="特殊资源" prop="resource">
            <el-radio-group v-model="form.resource">
                <el-radio label="线上品牌商赞助"></el-radio>
                <el-radio label="线下场地免费"></el-radio>
            </el-radio-group>
        </el-form-item>
        <el-form-item label="活动形式" prop="desc">
            <el-input type="textarea" v-model="form.desc"></el-input>
        </el-form-item>
        <el-form-item>
            <el-button type="primary" @click="onSubmit('form')">立即创建</el-button>
            <el-button @click="resetForm(('form'))">取消</el-button>
        </el-form-item>
    </el-form>
</div>

<script type="text/javascript">
    var app = new Vue({
        el:"#app",
        data() {
            return {
                form:{
                    name:'',
                    region:'',
                    delivery:false,
                    type:[],
                    resource:'',
                    desc:''
                },
                rules:{
                    name:[
                        { required: true, message: '请输入活动名称', trigger: 'blur' },
                        { min: 3, max: 50, message: '长度在 3 到 5 个字符', trigger: 'blur' },
                        {validator:(rule,value,callback)=>{
                                if (value=='张三1') {
                                    callback();
                                }else {
                                    callback('姓名不为张三')
                                }
                            },
                            trigger:'blur'
                        }
                    ],
                    region:[
                        { required: true, message: '请选择活动区域', trigger: 'change' }
                    ],
                    delivery:[
                        { required: true, message: '请选择是否及时配送', trigger: 'change' }
                    ],
                    type:[
                        { required: true, message: '请填写活动形式', trigger: 'blur' }
                    ],
                    resource:[
                        {required:true,message:"请选择特殊资源",trigger:"change"}
                    ],
                    desc:[
                        {required:true,message:"请写活动形式",trigger:"blur"}
                    ]
                }
            }
        },
        methods:{
            onSubmit(form) {
                    this.$refs[form].validate((flag)=>{
                        if(flag){
                            this.$message({
                                message: '恭喜你，提交成功',
                                type: 'success'
                            });
                            console.log(this.form);
                        }else{
                            this.$message({
                                message:"很遗憾，提交失败",
                                type: 'warning'
                            });
                            return false;
                        }
                    })
            },
            resetForm(form) {
                this.$refs[form].resetFields();
            }
        }
    });
</script>
</body>
</html>